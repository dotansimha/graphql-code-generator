---
id: fragment-matcher
title: Fragment Matcher
---

The `@graphql-codegen/fragment-matcher` generates an introspection file but only with Interfaces and Unions, based on your GraphQLSchema.

If you are using `apollo-client` and your schema contains `interface` or `union` declaration, it's recommended to use Apollo's Fragment Matcher and the result generated by the plugin.

You can read more about it [in `apollo-client` documentation](https://www.apollographql.com/docs/react/data/fragments/#fragments-on-unions-and-interfaces).

## Installation

    $ yarn add -D @graphql-codegen/fragment-matcher

## Configuration

Fragment Matcher plugin accepts a TypeScript / JavaScript or a JSON file as an output _(`.ts, .tsx, .js, .jsx, .json`)_.

Both in TypeScript and JavaScript a default export is being used.

The output is based on the output you choose for the output file name.

```yaml
generates:
  ./src/introspection-result.ts:
    plugins:
      - fragment-matcher
```


{@import ../generated-config/fragment-matcher.md}

## Usage with Apollo Client 3 

If you are using Apollo Client 3, you need to specify the `apolloClientVersion: 3` configuration, and then use it in your Apollo cache instance:

```typescript
import { InMemoryCache } from '@apollo/client';

// generated by Fragment Matcher plugin
import introspectionResult from '../introspection-result';

const cache = new InMemoryCache({
  possibleTypes: introspectionResult.possibleTypes,
});
```

> [Read more about fragment matcher and it's usage on Apollo Client](https://www.apollographql.com/docs/react/v3.0-beta/data/fragments/#defining-possibletypes-manually)


## Usage with Apollo Client 2

```typescript
import { InMemoryCache, IntrospectionFragmentMatcher } from 'apollo-cache-inmemory';

// generated by Fragment Matcher plugin
import introspectionResult from '../introspection-result';

const fragmentMatcher = new IntrospectionFragmentMatcher({
  introspectionQueryResultData: introspectionResult,
});

const cache = new InMemoryCache({
  fragmentMatcher,
});
```
